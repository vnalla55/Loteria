var iosOverlay=function(n){"use strict";var e,t=function(){},o={onbeforeshow:t,onshow:t,onbeforehide:t,onhide:t,text:"",icon:null,spinner:null,duration:null,id:null,parentEl:null},i=function(n,e){var t={};for(var o in n)t[o]=n[o];for(var i in e)t[i]=e[i];return t},r=function(){var n=document.body||document.documentElement,e=n.style,t="transition";if("string"==typeof e[t])return!0;var o=["Moz","Webkit","Khtml","O","ms"];t=t.charAt(0).toUpperCase()+t.substr(1);for(var i=0;i<o.length;i++)if("string"==typeof e[o[i]+t])return!0;return!1}(),a=i(o,n),d=function(n){"ios-overlay-show"===n.animationName&&a.onshow(),"ios-overlay-hide"===n.animationName&&(l(),a.onhide())},s=(function(){e=document.createElement("div"),e.className="ui-ios-overlay",e.innerHTML+='<span class="title">'+a.text+"</span",n.icon?e.innerHTML+='<img src="'+n.icon+'">':n.spinner&&e.appendChild(n.spinner.el),r&&(e.addEventListener("webkitAnimationEnd",d,!1),e.addEventListener("msAnimationEnd",d,!1),e.addEventListener("oAnimationEnd",d,!1),e.addEventListener("animationend",d,!1)),n.parentEl?document.getElementById(n.parentEl).appendChild(e):document.body.appendChild(e),a.onbeforeshow(),r?e.className+=" ios-overlay-show":"function"==typeof $&&$(e).fadeIn({duration:200},function(){a.onshow()}),a.duration&&window.setTimeout(function(){s()},a.duration)}(),function(){a.onbeforehide(),r?e.className=e.className.replace("show","hide"):"function"==typeof $&&$(e).fadeOut({duration:200},function(){l(),a.onhide()})}),l=function(){n.parentEl?document.getElementById(n.parentEl).removeChild(e):document.body.removeChild(e)},u=function(n){n.text&&(e.getElementsByTagName("span")[0].innerHTML=n.text),n.icon&&(a.spinner&&(a.spinner.el.parentNode.removeChild(a.spinner.el),a.spinner=null),e.innerHTML+='<img src="'+n.icon+'">')};return{hide:s,destroy:l,update:u}};